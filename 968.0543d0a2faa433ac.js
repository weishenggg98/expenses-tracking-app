"use strict";(self.webpackChunkexpenses_tracking_app=self.webpackChunkexpenses_tracking_app||[]).push([[968],{2968:(vt,S,p)=>{p.r(S),p.d(S,{ExpenseModule:()=>mt});var m=p(4666),v=p(7595),l=p(2508),t=p(2560),Z=function(){function e(n,a,s){this.el=n,this.vcr=a,this.renderer=s,this.dtOptions={}}return e.prototype.ngOnInit=function(){var n=this;this.dtTrigger?this.dtTrigger.subscribe(function(a){n.displayTable(a)}):this.displayTable(null)},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(n){var a=this;n&&(this.dtOptions=n),this.dtInstance=new Promise(function(s,r){Promise.resolve(a.dtOptions).then(function(o){0===Object.keys(o).length&&0===$("tbody tr",a.el.nativeElement).length?r("Both the table and dtOptions cannot be empty"):setTimeout(function(){var d={rowCallback:function(c,g,M){if(o.columns){var y=o.columns;a.applyNgPipeTransform(c,y),a.applyNgRefTemplate(c,y,g)}o.rowCallback&&o.rowCallback(c,g,M)}};d=Object.assign({},o,d),a.dt=$(a.el.nativeElement).DataTable(d),s(a.dt)})})})},e.prototype.applyNgPipeTransform=function(n,a){a.filter(function(r){return r.ngPipeInstance&&!r.ngTemplateRef}).forEach(function(r){var o=r.ngPipeInstance,i=r.ngPipeArgs||[],d=a.findIndex(function(y){return y.data===r.data}),c=n.childNodes.item(d),g=$(c).text(),M=o.transform.apply(o,function(e,n,a){if(a||2===arguments.length)for(var o,s=0,r=n.length;s<r;s++)(o||!(s in n))&&(o||(o=Array.prototype.slice.call(n,0,s)),o[s]=n[s]);return e.concat(o||Array.prototype.slice.call(n))}([g],i,!1));$(c).text(M)})},e.prototype.applyNgRefTemplate=function(n,a,s){var r=this;a.filter(function(i){return i.ngTemplateRef&&!i.ngPipeInstance}).forEach(function(i){var d=i.ngTemplateRef,c=d.ref,g=d.context,M=a.findIndex(function(yt){return yt.data===i.data}),y=n.childNodes.item(M);$(y).html("");var ht=Object.assign({},g,g?.userData,{adtData:s}),xt=r.vcr.createEmbeddedView(c,ht);r.renderer.appendChild(y,xt.rootNodes[0])})},e.\u0275fac=function(a){return new(a||e)(t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(t.Qsj))},e.\u0275dir=t.lG2({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),U=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez]}),e}(),P=p(253),x=(()=>{return(e=x||(x={}))[e.Credit=0]="Credit",e[e.Debit=1]="Debit",x;var e})(),A=(()=>{return(e=A||(A={}))[e.Others=0]="Others",e[e.Bill=1]="Bill",e[e.Loan=2]="Loan",e[e.Shopping=3]="Shopping",A;var e})(),h=(()=>{return(e=h||(h={}))[e.Add=0]="Add",e[e.Update=1]="Update",h;var e})(),w=p(4929),f=(()=>{return(e=f||(f={}))[e.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",e[e.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",e[e.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",f;var e})();const q=new class I{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(n){this._typeMetadatas.has(n.target)||this._typeMetadatas.set(n.target,new Map),this._typeMetadatas.get(n.target).set(n.propertyName,n)}addTransformMetadata(n){this._transformMetadatas.has(n.target)||this._transformMetadatas.set(n.target,new Map),this._transformMetadatas.get(n.target).has(n.propertyName)||this._transformMetadatas.get(n.target).set(n.propertyName,[]),this._transformMetadatas.get(n.target).get(n.propertyName).push(n)}addExposeMetadata(n){this._exposeMetadatas.has(n.target)||this._exposeMetadatas.set(n.target,new Map),this._exposeMetadatas.get(n.target).set(n.propertyName,n)}addExcludeMetadata(n){this._excludeMetadatas.has(n.target)||this._excludeMetadatas.set(n.target,new Map),this._excludeMetadatas.get(n.target).set(n.propertyName,n)}findTransformMetadatas(n,a,s){return this.findMetadatas(this._transformMetadatas,n,a).filter(r=>!r.options||!0===r.options.toClassOnly&&!0===r.options.toPlainOnly||(!0===r.options.toClassOnly?s===f.CLASS_TO_CLASS||s===f.PLAIN_TO_CLASS:!0!==r.options.toPlainOnly||s===f.CLASS_TO_PLAIN))}findExcludeMetadata(n,a){return this.findMetadata(this._excludeMetadatas,n,a)}findExposeMetadata(n,a){return this.findMetadata(this._exposeMetadatas,n,a)}findExposeMetadataByCustomName(n,a){return this.getExposedMetadatas(n).find(s=>s.options&&s.options.name===a)}findTypeMetadata(n,a){return this.findMetadata(this._typeMetadatas,n,a)}getStrategy(n){const a=this._excludeMetadatas.get(n),s=a&&a.get(void 0),r=this._exposeMetadatas.get(n),o=r&&r.get(void 0);return s&&o||!s&&!o?"none":s?"excludeAll":"exposeAll"}getExposedMetadatas(n){return this.getMetadata(this._exposeMetadatas,n)}getExcludedMetadatas(n){return this.getMetadata(this._excludeMetadatas,n)}getExposedProperties(n,a){return this.getExposedMetadatas(n).filter(s=>!s.options||!0===s.options.toClassOnly&&!0===s.options.toPlainOnly||(!0===s.options.toClassOnly?a===f.CLASS_TO_CLASS||a===f.PLAIN_TO_CLASS:!0!==s.options.toPlainOnly||a===f.CLASS_TO_PLAIN)).map(s=>s.propertyName)}getExcludedProperties(n,a){return this.getExcludedMetadatas(n).filter(s=>!s.options||!0===s.options.toClassOnly&&!0===s.options.toPlainOnly||(!0===s.options.toClassOnly?a===f.CLASS_TO_CLASS||a===f.PLAIN_TO_CLASS:!0!==s.options.toPlainOnly||a===f.CLASS_TO_PLAIN)).map(s=>s.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(n,a){const s=n.get(a);let r;s&&(r=Array.from(s.values()).filter(i=>void 0!==i.propertyName));const o=[];for(const i of this.getAncestors(a)){const d=n.get(i);if(d){const c=Array.from(d.values()).filter(g=>void 0!==g.propertyName);o.push(...c)}}return o.concat(r||[])}findMetadata(n,a,s){const r=n.get(a);if(r){const o=r.get(s);if(o)return o}for(const o of this.getAncestors(a)){const i=n.get(o);if(i){const d=i.get(s);if(d)return d}}}findMetadatas(n,a,s){const r=n.get(a);let o;r&&(o=r.get(s));const i=[];for(const d of this.getAncestors(a)){const c=n.get(d);c&&c.has(s)&&i.push(...c.get(s))}return i.slice().reverse().concat((o||[]).slice().reverse())}getAncestors(n){if(!n)return[];if(!this._ancestorsMap.has(n)){const a=[];for(let s=Object.getPrototypeOf(n.prototype.constructor);typeof s.prototype<"u";s=Object.getPrototypeOf(s.prototype.constructor))a.push(s);this._ancestorsMap.set(n,a)}return this._ancestorsMap.get(n)}};(0,w.gn)([function J(e,n={}){return function(a,s){const r=Reflect.getMetadata("design:type",a,s);q.addTypeMetadata({target:a.constructor,propertyName:s,reflectedType:r,typeFunction:e,options:n})}}(()=>Number)],class F{constructor(){this.id="",this.title="",this.category=A.Others,this.remark="",this.amount=0,this.createdDateTime=0,this.amountType=x.Credit}}.prototype,"amountType",void 0);var b=p(5944),L=p(4522),Q=p(900);function R(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Others"),t.qZA())}function Y(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Loan"),t.qZA())}function B(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Bill"),t.qZA())}function k(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Shopping"),t.qZA())}function j(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,a.amount,"1.2-2"))}}function V(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,a.amount,"1.2-2"))}}const E=function(){return["detail"]},G=function(e){return{id:e}};function z(e,n){if(1&e&&(t.TgZ(0,"tr",4)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",5),t.YNc(4,R,2,0,"span",6),t.YNc(5,Y,2,0,"span",6),t.YNc(6,B,2,0,"span",6),t.YNc(7,k,2,0,"span",6),t.qZA(),t.TgZ(8,"td"),t.YNc(9,j,3,4,"span",7),t.qZA(),t.TgZ(10,"td"),t.YNc(11,V,3,4,"span",7),t.qZA()()),2&e){const a=n.$implicit,s=t.oxw();t.Q6J("routerLink",t.DdM(10,E))("queryParams",t.VKq(11,G,a.id)),t.xp6(2),t.Oqu(a.title),t.xp6(1),t.Q6J("ngSwitch",a.category),t.xp6(1),t.Q6J("ngSwitchCase",s.CategoryType.Others),t.xp6(1),t.Q6J("ngSwitchCase",s.CategoryType.Loan),t.xp6(1),t.Q6J("ngSwitchCase",s.CategoryType.Bill),t.xp6(1),t.Q6J("ngSwitchCase",s.CategoryType.Shopping),t.xp6(2),t.Q6J("ngIf",a.amountType===s.AmountType.Debit),t.xp6(2),t.Q6J("ngIf",a.amountType===s.AmountType.Credit)}}let O=(()=>{class e{constructor(a){this.userDataService=a,this.expensesList=new Array,this.dtOptions={},this.dtTrigger=new P.x,this.CategoryType=A,this.AmountType=x}ngOnInit(){this.dtOptions={lengthChange:!1,ordering:!0,searching:!1,responsive:!0,paging:!1},this.getExpensesList()}getExpensesList(){this.expensesList=this.userDataService.userData?.expenseList,setTimeout(()=>{this.dtTrigger.next(0)})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(b.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-expense-list"]],viewQuery:function(a,s){if(1&a&&t.Gf(Z,5),2&a){let r;t.iGM(r=t.CRH())&&(s.dtElement=r.first)}},decls:17,vars:5,consts:[["mat-fab","","color","primary",1,"btn-add-expense",3,"routerLink"],[1,"table-responsive"],["datatable","",1,"table","table-hover",3,"dtOptions","dtTrigger"],[3,"routerLink","queryParams",4,"ngFor","ngForOf"],[3,"routerLink","queryParams"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngIf"]],template:function(a,s){1&a&&(t.TgZ(0,"button",0)(1,"mat-icon"),t._uU(2,"add"),t.qZA()(),t.TgZ(3,"div",1)(4,"table",2)(5,"thead")(6,"tr")(7,"th"),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Category"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Debit"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Credit"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,z,12,13,"tr",3),t.qZA()()()),2&a&&(t.Q6J("routerLink",t.DdM(4,E)),t.xp6(4),t.Q6J("dtOptions",s.dtOptions)("dtTrigger",s.dtTrigger),t.xp6(12),t.Q6J("ngForOf",s.expensesList))},dependencies:[m.sg,m.O5,m.RF,m.n9,v.rH,Z,L.lW,Q.Hw,m.JJ],styles:[".btn-add-expense[_ngcontent-%COMP%]{position:fixed;bottom:1rem;right:1rem}@media screen and (min-width: 800px){.btn-add-expense[_ngcontent-%COMP%]{right:5rem}}"]}),e})();var T,H=new Uint8Array(16);function W(){if(!T&&!(T=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return T(H)}const X=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,tt=function K(e){return"string"==typeof e&&X.test(e)};for(var u=[],_=0;_<256;++_)u.push((_+256).toString(16).substr(1));const st=function at(e,n,a){var s=(e=e||{}).random||(e.rng||W)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,n){a=a||0;for(var r=0;r<16;++r)n[a+r]=s[r];return n}return function et(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(u[e[n+0]]+u[e[n+1]]+u[e[n+2]]+u[e[n+3]]+"-"+u[e[n+4]]+u[e[n+5]]+"-"+u[e[n+6]]+u[e[n+7]]+"-"+u[e[n+8]]+u[e[n+9]]+"-"+u[e[n+10]]+u[e[n+11]]+u[e[n+12]]+u[e[n+13]]+u[e[n+14]]+u[e[n+15]]).toLowerCase();if(!tt(a))throw TypeError("Stringified UUID is invalid");return a}(s)};var rt=p(207),C=p(5074),ot=p(1267),D=p(2922),it=p(7371),pt=p(4345);function ut(e,n){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Add Expense"),t.qZA())}function dt(e,n){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Update Expense"),t.qZA())}const lt=function(){return["expenses"]},ct=[{path:"",component:O},{path:"list",component:O},{path:"detail",component:(()=>{class e{constructor(a,s,r,o){this.formBuilder=a,this.router=s,this.route=r,this.userDataService=o,this.pageAction=h.Add,this.PageAction=h,this.currencyConfig={align:"left",allowNegative:!1,decimal:".",precision:2,prefix:"",suffix:"",thousands:","},this.CategoryType=A,this.AmountType=x,this.expenseGuid=null}ngOnInit(){this.expenseForm=this.formBuilder.group({id:null,title:[null,[l.kI.required,l.kI.maxLength(100)]],category:[null,l.kI.required],remark:null,amount:[null,[l.kI.required,l.kI.min(.01),l.kI.max(999999.99)]],createdDateTime:null,amountType:[x.Credit,[l.kI.required]]}),this.getQueryParams().then(a=>{if(a){this.pageAction=h.Update;const s=this.userDataService.getExpense(a);s&&this.expenseForm.patchValue(s)}else this.pageAction=h.Add})}getQueryParams(){return new Promise(a=>{this.route.queryParams.subscribe(s=>{a(s.id)})})}onSubmit(){if(this.expenseForm.markAllAsTouched(),this.expenseForm.valid&&this.userDataService.isUserDataExist()){let a=this.expenseForm.value;this.pageAction===h.Update?(this.userDataService.updateExpense(a),this.router.navigate(["expenses"])):(a.id=st(),a.createdDateTime=Date.now(),this.userDataService.addExpense(a),this.router.navigate(["expenses"]))}}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(l.qu),t.Y36(v.F0),t.Y36(v.gz),t.Y36(b.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-expense-detail"]],decls:50,vars:12,consts:[[1,"container"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","fill",1,"w-100"],["matInput","","formControlName","title"],[1,"col-md-6"],["appearance","fill","floatLabel","always",1,"w-100"],["matInput","","placeholder","0.00","currencyMask","","formControlName","amount",3,"options"],["matPrefix",""],["formControlName","category"],[3,"value"],["aria-label","Select an option","formControlName","amountType"],["name","radio-amount-type",1,"me-2",3,"value"],["name","radio-amount-type",3,"value"],["matInput","","rows","5","formControlName","remark"],["mat-raised-button","","color","primary","type","submit",1,"me-2"],["mat-raised-button","","color","basic",3,"routerLink"]],template:function(a,s){1&a&&(t.TgZ(0,"div",0),t.YNc(1,ut,2,0,"h2",1),t.YNc(2,dt,2,0,"h2",1),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return s.onSubmit()}),t.TgZ(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Title"),t.qZA(),t._UZ(9,"input",6),t.qZA()()(),t.TgZ(10,"div",3)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Amount"),t.qZA(),t._UZ(15,"input",9),t.TgZ(16,"span",10),t._uU(17,"RM \xa0"),t.qZA()()(),t.TgZ(18,"div",7)(19,"mat-form-field",5)(20,"mat-label"),t._uU(21,"Category"),t.qZA(),t.TgZ(22,"mat-select",11)(23,"mat-option",12),t._uU(24,"Others"),t.qZA(),t.TgZ(25,"mat-option",12),t._uU(26,"Loan"),t.qZA(),t.TgZ(27,"mat-option",12),t._uU(28,"Bill"),t.qZA(),t.TgZ(29,"mat-option",12),t._uU(30,"Shopping"),t.qZA()()()()(),t.TgZ(31,"div",3)(32,"div",4)(33,"mat-radio-group",13)(34,"mat-radio-button",14),t._uU(35," Credit "),t.qZA(),t.TgZ(36,"mat-radio-button",15),t._uU(37," Debit "),t.qZA()(),t._UZ(38,"br")(39,"br"),t.qZA()(),t.TgZ(40,"div",3)(41,"div",4)(42,"mat-form-field",5)(43,"mat-label"),t._uU(44,"Remark"),t.qZA(),t._UZ(45,"textarea",16),t.qZA()()(),t.TgZ(46,"button",17),t._uU(47,"Submit"),t.qZA(),t.TgZ(48,"button",18),t._uU(49,"Back"),t.qZA()()()),2&a&&(t.xp6(1),t.Q6J("ngIf",s.pageAction===s.PageAction.Add),t.xp6(1),t.Q6J("ngIf",s.pageAction===s.PageAction.Update),t.xp6(1),t.Q6J("formGroup",s.expenseForm),t.xp6(12),t.Q6J("options",s.currencyConfig),t.xp6(8),t.Q6J("value",s.CategoryType.Others),t.xp6(2),t.Q6J("value",s.CategoryType.Loan),t.xp6(2),t.Q6J("value",s.CategoryType.Bill),t.xp6(2),t.Q6J("value",s.CategoryType.Shopping),t.xp6(5),t.Q6J("value",s.AmountType.Credit),t.xp6(2),t.Q6J("value",s.AmountType.Debit),t.xp6(12),t.Q6J("routerLink",t.DdM(11,lt)))},dependencies:[m.O5,v.rH,l._Y,l.Fj,l.JJ,l.JL,rt.ey,L.lW,C.KE,C.hX,C.qo,ot.Nt,D.VQ,D.U0,it.gD,pt.g1,l.sg,l.u]}),e})()},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:""}];let ft=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[v.Bz.forChild(ct),v.Bz,l.u5]}),e})();var gt=p(5601);let mt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,ft,U,gt.m]}),e})()}}]);
//# sourceMappingURL=968.0543d0a2faa433ac.js.map